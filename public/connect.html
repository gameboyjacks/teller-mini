<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Teller Connect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body style="font-family:system-ui, sans-serif; padding:2rem; max-width:680px; margin:auto">
    <h2>Connect a Bank</h2>
    <p>Label helps you separate tokens (e.g., capital-one, chase, us-bank)</p>
    <label>
      Label:
      <input id="label" value="capital-one" />
    </label>
    <p><button id="connect">Connect</button></p>

    <script src="https://cdn.teller.io/connect/connect.js"></script>
    <script>
      // Replace with your Teller Application ID
      const APPLICATION_ID = "app_ph832a01sgi892se18000";

      const connect = TellerConnect.setup({
        applicationId: APPLICATION_ID,
        onSuccess: async (auth) => {
          await fetch("/save-token", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              access_token: auth.accessToken,
              label: document.getElementById("label").value
            })
          });
          alert("Linked!");
        },
        onExit: () => {}
      });

      document.getElementById("connect").onclick = () => connect.open();
    </script>
  </body>
</html>
